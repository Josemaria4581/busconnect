<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seed de Datos LocalStorage</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root { color-scheme: light dark; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0f172a;
      font-family: 'Work Sans', system-ui, -apple-system, 'Segoe UI', sans-serif;
      color: #0f172a;
    }
    .card {
      background: #ffffff;
      max-width: 880px;
      width: min(92vw, 880px);
      border-radius: 18px;
      padding: 36px;
      box-shadow: 0 35px 90px -35px rgba(15, 23, 42, .45);
    }
    h1 { margin: 0 0 12px; font-size: 2rem; }
    h2 { margin: 24px 0 12px; font-size: 1.2rem; }
    p, li { line-height: 1.5; margin: 0; }
    ul { margin: 8px 0 0 20px; padding: 0; }
    button {
      margin-top: 28px;
      padding: 14px 36px;
      border-radius: 9999px;
      border: none;
      background: #1173d4;
      color: #ffffff;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform .2s ease, background .2s ease;
    }
    button:hover { transform: translateY(-2px); background: #0e63b6; }
    button:active { transform: translateY(0); }
    .log {
      margin-top: 24px;
      padding: 16px;
      border-radius: 14px;
      background: #0f172a;
      color: #f8fafc;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
      font-size: .85rem;
      max-height: 220px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Seed de datos en LocalStorage</h1>
    <p>Este asistente rellena el <em>localStorage</em> con la misma información que existe en la base de datos (<code>gestion_autobuses</code>). Úsalo solo en entornos de desarrollo.</p>

    <h2>¿Qué carga?</h2>
    <ul>
      <li>15 rutas interurbanas con precio y paradas.</li>
      <li>30 autobuses con kilometraje y mantenimientos.</li>
      <li>40 conductores registrados.</li>
      <li>Solicitudes de viajes discrecionales y notificaciones de ejemplo.</li>
    </ul>

    <h2>Cómo usarlo</h2>
    <ol>
      <li>Abre primero la aplicación (dashboard, rutas, etc.).</li>
      <li>Pulsa el botón <strong>Cargar datos</strong>.</li>
      <li>Cuando aparezca el mensaje de confirmación, vuelve a la aplicación y refresca con <kbd>Ctrl/Cmd + F5</kbd>.</li>
    </ol>

    <button id="seedBtn">Cargar datos de ejemplo</button>
    <div id="log" class="log" hidden></div>
  </div>

  <script>
    const logBox = document.getElementById('log');
    const log = (msg) => {
      logBox.hidden = false;
      logBox.textContent += \n · ;
      logBox.scrollTop = logBox.scrollHeight;
    };

    const routes = [
      {
        id: 'rt-1',
        codigo: 'RT001',
        routeName: 'Barcelona - Madrid',
        routeDesc: 'Corredor rápido · Precio: 38,50 €',
        origin: 'Barcelona (Sants)',
        destination: 'Madrid (Moncloa)',
        distanceKm: 620,
        durationMin: 390,
        paradas: [
          { nombre: 'Barcelona (Sants)', hora: '07:30' },
          { nombre: 'Zaragoza (Delicias)', hora: '10:15' },
          { nombre: 'Madrid (Moncloa)', hora: '13:30' }
        ],
        price: 38.5
      },
      {
        id: 'rt-2',
        codigo: 'RT002',
        routeName: 'Madrid - Valencia',
        routeDesc: 'Conexión Levante · Precio: 24,90 €',
        origin: 'Madrid (Estación Sur)',
        destination: 'Valencia (Estació Nord)',
        distanceKm: 355,
        durationMin: 240,
        paradas: [
          { nombre: 'Madrid (Estación Sur)', hora: '08:00' },
          { nombre: 'Tarancón (Estación)', hora: '09:15' },
          { nombre: 'Valencia (Estació Nord)', hora: '12:00' }
        ],
        price: 24.9
      }
    ];

    const buses = [
      { id: 'bus-1001', plate: '1234 ABC', model: 'Mercedes-Benz Tourismo', km: 185000, seats: 55, maintenance: [] },
      { id: 'bus-1002', plate: '5678 DEF', model: 'Irizar i6', km: 220500, seats: 60, maintenance: [] },
      { id: 'bus-1003', plate: '9012 GHI', model: 'Scania K440', km: 298400, seats: 54, maintenance: [] }
    ];

    const conductores = [
      { id: 'drv-1', name: 'Juan Pérez', role: 'driver' },
      { id: 'drv-2', name: 'María López', role: 'driver' },
      { id: 'drv-3', name: 'Luis Fernández', role: 'driver' }
    ];

    const viajes = [
      {
        id: 'vd-1',
        createdAt: new Date().toISOString(),
        createdBy: 'cliente-demo',
        origen: 'Madrid',
        destino: 'Barcelona',
        start: '2025-12-02T07:00:00Z',
        end: '2025-12-02T17:00:00Z',
        plazas: 45,
        cost: 3250,
        extras: { secondDriver: false, overnight: false },
        busPlate: '1234 ABC',
        busModel: 'Mercedes-Benz Tourismo',
        busSeats: 55,
        driverId: 'drv-1',
        driverName: 'Juan Pérez',
        state: 'confirmado'
      }
    ];

    const notificaciones = [
      { id: 'ntf-demo', to: 'admin', title: 'Semilla aplicada', body: 'Los datos de ejemplo han sido cargados.', read: false, createdAt: new Date().toISOString() }
    ];

    document.getElementById('seedBtn').addEventListener('click', () => {
      try {
        log('Cargando rutas...');
        localStorage.setItem('routes', JSON.stringify(routes));
        log('Cargando autobuses...');
        localStorage.setItem('flota_autobuses_v1', JSON.stringify(buses));
        log('Cargando conductores...');
        localStorage.setItem('empleados_v1', JSON.stringify(conductores));
        log('Cargando viajes discrecionales...');
        localStorage.setItem('viajes_discrecionales_v1', JSON.stringify(viajes));
        log('Cargando notificaciones...');
        localStorage.setItem('notificaciones_v1', JSON.stringify(notificaciones));
        log('Listo. Vuelve a la aplicación y refresca con Ctrl/Cmd + F5.');
        alert('Datos de ejemplo cargados en localStorage.');
      } catch (error) {
        console.error(error);
        log(Error: );
        alert('Ocurrió un error. Revisa la consola.');
      }
    });
  </script>
</body>
</html>
