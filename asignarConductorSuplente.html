<!DOCTYPE html>

<html class="light" lang="es">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Asignar Suplente</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&amp;display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#1173d4",
            "background-light": "#f6f7f8",
            "background-dark": "#101922",
            "corporate-blue": "#005A9C",
            "neutral-gray": "#F2F2F7",
            "accent-green": "#28A745",
            "accent-amber": "#FFC107",
            "accent-red": "#DC3545",
            "text-dark": "#1C1C1E"
          },
          fontFamily: {
            "display": ["Manrope", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.5rem",
            "lg": "0.75rem",
            "xl": "1rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>
  <style>
    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24
    }
  </style>
  <style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display">
  <div class="relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden">
    <div
      class="flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 justify-between sticky top-0 z-10 border-b border-neutral-gray dark:border-gray-800">
      <button onclick="window.location.href='reporteIncidenciaConductor.html'"
        class="text-text-dark dark:text-white flex size-10 shrink-0 items-center justify-center rounded-full">
        <span class="material-symbols-outlined">arrow_back</span>
      </button>
      <h1 class="text-text-dark dark:text-white text-xl font-bold leading-tight tracking-[-0.015em] flex-1 text-center">
        Asignar Suplente</h1>
      <div class="w-10"></div>
    </div>
    <main class="flex-1 p-4 space-y-6">
      <section>
        <h2 class="text-text-dark dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] mb-3">Detalles del
          Viaje</h2>
        <div class="p-4 grid grid-cols-2 gap-4 bg-white dark:bg-gray-800 rounded-lg shadow-sm">
          <div class="flex flex-col gap-1">
            <p class="text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">Ruta</p>
            <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">R-123</p>
          </div>
          <div class="flex flex-col gap-1">
            <p class="text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">Origen-Destino</p>
            <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">Madrid - Barcelona</p>
          </div>
          <div class="flex flex-col gap-1">
            <p class="text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">Fecha</p>
            <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">25/10/2023</p>
          </div>
          <div class="flex flex-col gap-1">
            <p class="text-gray-500 dark:text-gray-400 text-sm font-normal leading-normal">Hora</p>
            <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">14:30</p>
          </div>
        </div>
      </section>
      <section>
        <h2 class="text-text-dark dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] mb-3">Conductor
          Original</h2>
        <div class="flex items-center gap-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm">
          <img class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-12 w-12"
            data-alt="Foto de Juan Pérez"
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuBqsD36X24qOyB1SdGZui9Aq2eNYYLjMGXC81S8UkiMLzy6-KouSqXH-jpXQtdYSYH-Puk3ZnwuDmg6PnbGjDR1nQ24gqtm4FVLF-feIcaxSC-Y3djQf0TqZ7Jy2JtJVAMhiOavw4QPM9SmnF-UZboBerXFpAjaP6KZ4HK96GEzrjUEMyWGqPYW2-yzvvTvZmSoFq0sur6UQqDhhzCv35ext7RptvKW-Q1RJWXOLoAp4fnaQ6KyiRLuBa9q8XcZSUiW8JO9RxvKWg" />
          <p class="text-text-dark dark:text-white text-lg font-medium leading-normal flex-1 truncate">Juan Pérez</p>
          <div class="flex items-center gap-2 text-accent-amber">
            <span class="material-symbols-outlined">warning</span>
            <p class="text-sm font-semibold">Incidencia</p>
          </div>
        </div>
      </section>
      <section>
        <h2 class="text-text-dark dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] mb-3">Conductores
          Disponibles</h2>
        <div class="relative mb-4">
          <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">search</span>
          <input
            class="w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 text-text-dark dark:text-white border-none rounded-lg shadow-sm focus:ring-2 focus:ring-primary"
            placeholder="Buscar por nombre..." type="text" />
        </div>
        <div class="space-y-3">
          <div
            class="flex items-center gap-4 bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border-2 border-primary">
            <input checked="" class="form-radio h-5 w-5 text-primary focus:ring-primary" id="driver1"
              name="substitute-driver" type="radio" />
            <label class="flex-1 flex items-center gap-4 cursor-pointer" for="driver1">
              <img class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-12 w-12"
                data-alt="Foto de María García"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDilhMHba4mNdT3atjhLORcEXSr9SmX6N0k3W9OUQwI6zuPTwd4VP0Hw4AZUxQBN5vnmNbe0RmG03IGjt6A6EpSD678xaM1Mc-r4Qgc2xJhLKRuTBMOeqIhqj_mu2DM5sbQT7uHfPVTad4R---EorAKEFoGNIbNo5RACh0gyeZ8cp9McvjS6SChSJkRgSnym9yjZxnjbjRnqsNdq1Uupde1EdwYn8h5VDIBu3ZkivwPLO8Ux0f5E9QlCGAuoPERjqX3T_zvqiexog" />
              <div class="flex-1">
                <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">María García</p>
                <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">
                  <span class="material-symbols-outlined text-accent-green text-base">location_on</span>
                  <span>A 15 min de la estación</span>
                </div>
              </div>
              <div class="flex items-center gap-1 text-accent-green">
                <span class="w-3 h-3 bg-accent-green rounded-full"></span>
                <p class="text-sm font-medium">Disponible</p>
              </div>
            </label>
          </div>
          <div
            class="flex items-center gap-4 bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border-2 border-transparent hover:border-primary/50">
            <input class="form-radio h-5 w-5 text-primary focus:ring-primary" id="driver2" name="substitute-driver"
              type="radio" />
            <label class="flex-1 flex items-center gap-4 cursor-pointer" for="driver2">
              <img class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-12 w-12"
                data-alt="Foto de Carlos Rodríguez"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDLlU3fL1jdnXF6tzZNNGRBe0qTiWPiavD265Bgt0wtXjf3uIPJCiAjndd2aIr5-BeLVtdZykbD641T7M8p8N25a9TQ-eTxkKP4yqi0pELWv7KzjzUe2uz35cWL4381WWnm5TCb9G2t7uP6nBrYIz5P8Ti5pJ-qc8NhMwfL5C8l-kaNF9p7cRubpz_-ljO3M9bxRtqpy7EcXSBtK0F_G-j0m3bWhGEzDQn8ZiFo5nz3DWfuOAS0S6DjUooRwjlWBGaNcGGvImPYVA" />
              <div class="flex-1">
                <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">Carlos Rodríguez</p>
                <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">
                  <span class="material-symbols-outlined text-accent-green text-base">location_on</span>
                  <span>A 25 min de la estación</span>
                </div>
              </div>
              <div class="flex items-center gap-1 text-accent-green">
                <span class="w-3 h-3 bg-accent-green rounded-full"></span>
                <p class="text-sm font-medium">Disponible</p>
              </div>
            </label>
          </div>
          <div
            class="flex items-center gap-4 bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border-2 border-transparent hover:border-primary/50">
            <input class="form-radio h-5 w-5 text-primary focus:ring-primary" id="driver3" name="substitute-driver"
              type="radio" />
            <label class="flex-1 flex items-center gap-4 cursor-pointer" for="driver3">
              <img class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-12 w-12"
                data-alt="Foto de Ana López"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuDUJj5s_lBp4q-5m3kSbbmHFGTmw4BL8mEB8PxD9nqsFVH3Q2UKgb5UN3gANGKYNG_TTn10iYt1epcQqq4tQfn0647-8EbfKgC98Ofz_7rhinp00paZbhydtRYCVzwE01cQt5ie-e4Iw0SLkxRxOP8GxQIvzRI-fPNPI1CseJu2b-lMfkFuQ_3JodJReuwkRQATfnHMdOMpmMs7MlpoAyc5s8MxM9qawc-o-0FtT36aoxez1oXIgO_eXrC2w2F6AMpHm1b8v_FumA" />
              <div class="flex-1">
                <p class="text-text-dark dark:text-white text-base font-semibold leading-normal">Ana López</p>
                <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">
                  <span class="material-symbols-outlined text-accent-green text-base">schedule</span>
                  <span>Último viaje hace 10h</span>
                </div>
              </div>
              <div class="flex items-center gap-1 text-accent-green">
                <span class="w-3 h-3 bg-accent-green rounded-full"></span>
                <p class="text-sm font-medium">Disponible</p>
              </div>
            </label>
          </div>
        </div>
      </section>
      <section>
        <h2 class="text-text-dark dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] mb-3">Notas de
          Asignación (Opcional)</h2>
        <textarea
          class="w-full p-3 bg-white dark:bg-gray-800 text-text-dark dark:text-white border-none rounded-lg shadow-sm focus:ring-2 focus:ring-primary min-h-[100px]"
          placeholder="Añade instrucciones o comentarios para el suplente..."></textarea>
      </section>
    </main>
    <footer
      class="p-4 bg-background-light dark:bg-background-dark sticky bottom-0 border-t border-neutral-gray dark:border-gray-800">
      <button id="btnAsignarSuplente"
        class="w-full flex items-center justify-center rounded-lg h-12 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] shadow-lg hover:bg-primary/90 transition-colors">
        Asignar Suplente
      </button>
    </footer>
  </div>
  <script>
      (function guard() {
        const role = localStorage.getItem('role');
        if (role !== 'conductor' && role !== 'driver') { window.location.href = 'inicioSesion.html'; }
      })();
    (function setupAsignacion() {
      const btn = document.getElementById('btnAsignarSuplente');
      if (!btn) return;
      btn.addEventListener('click', function () {
        try {
          const selected = document.querySelector('input[name="substitute-driver"]:checked');
          let suplenteNombre = '';
          if (selected) {
            const lab = document.querySelector('label[for="' + selected.id + '"]');
            const nameEl = lab ? lab.querySelector('p') : null;
            suplenteNombre = (nameEl?.textContent || '').trim() || 'Suplente';
          }
          const LS_INCID = 'incidencias_conductores_v1';
          const list = JSON.parse(localStorage.getItem(LS_INCID) || '[]');
          const driverId = localStorage.getItem('driverId') || null;
          const inc = {
            id: 'inc_' + Date.now(),
            createdAt: new Date().toISOString(),
            driverId,
            type: 'suplente',
            description: 'Asignado suplente: ' + suplenteNombre,
            replacementName: suplenteNombre,
            status: 'abierta'
          };
          list.push(inc);
          localStorage.setItem(LS_INCID, JSON.stringify(list));
          localStorage.setItem('incidencias_ping', String(Date.now()));
          alert('Suplente asignado: ' + suplenteNombre);
        } catch { }
        window.location.href = 'aplicacionConductor.html';
      });
    })();
  </script>
</body>

</html>